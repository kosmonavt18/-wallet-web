<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Wallet Web</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="auth" class="card">
    <h1 id="authTitle" data-key="auth.title">–í–æ–π—Ç–∏</h1>
    <table style="width:100%;border-collapse:collapse">
      <tr>
        <td style="padding:8px;width:80px" data-key="auth.login">–õ–æ–≥–∏–Ω:</td>
        <td><input id="email" placeholder="Email" style="width:100%" /></td>
      </tr>
      <tr>
        <td style="padding:8px" data-key="auth.password">–ü–∞—Ä–æ–ª—å:</td>
        <td><input id="password" type="password" placeholder="–ü–∞—Ä–æ–ª—å" style="width:100%" /></td>
      </tr>
    </table>
    <div id="authError" class="small" style="color:#c00"></div>
    <button id="loginBtn" data-key="auth.loginBtn">–í–æ–π—Ç–∏</button>
    <button id="registerBtn" class="link" data-key="auth.register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
    <button id="confirmRegisterBtn" class="hidden" data-key="auth.confirmRegister">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
    <button id="backToLogin" class="link hidden" data-key="auth.backToLogin">–ù–∞–∑–∞–¥ –∫ –≤—Ö–æ–¥—É</button>
  </div>

  <div id="app" class="hidden">
    <nav class="tabs">
      <a href="#wallet" data-tab="wallet" class="active" data-key="nav.wallet">–∫–æ—à–µ–ª–µ–∫</a>
      <a href="#cards" data-tab="cards" data-key="nav.cards">–ö–∞—Ä—Ç—ã</a>
      <a href="#rates" data-tab="rates" data-key="nav.rates">–ö—É—Ä—Å –≤–∞–ª—é—Ç</a>
      <div style="margin-left:auto;display:flex;gap:8px;align-items:center">
        <select id="languageSelect" style="padding:4px 8px;border-radius:4px;border:1px solid #ddd;background:white;">
          <option value="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</option>
          <option value="en">üá∫üá∏ English</option>
          <option value="ky">üá∞üá¨ –ö—ã—Ä–≥—ã–∑—á–∞</option>
          <option value="tr">üáπüá∑ T√ºrk√ße</option>
        </select>
        <button id="profileBtn" class="link" data-key="nav.profile">üë§ –ü—Ä–æ—Ñ–∏–ª—å</button>
        <button id="logout" class="link" data-key="nav.logout">üö™ –í—ã–π—Ç–∏</button>
      </div>
    </nav>

    <section id="wallet" class="tab active">
      <h2 data-key="wallet.title">–ö–æ—à–µ–ª—ë–∫</h2>
      <div id="walletList" class="wallet-list"></div>
    </section>

    <section id="cards" class="tab">
      <div class="row between">
        <h2 data-key="cards.title">–ö–∞—Ä—Ç—ã</h2>
        <button id="addCard" class="fab">+</button>
      </div>
      <div id="cardsList" class="grid"></div>
    </section>

    <section id="rates" class="tab">
      <h2 data-key="rates.title">–ö—É—Ä—Å –≤–∞–ª—é—Ç</h2>
      <div id="ratesDate" class="small" style="text-align:center;margin-bottom:20px"></div>
      <div id="ratesList" class="rates-grid"></div>
      
      <h3 style="margin-top:30px" data-key="rates.converter">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏</h3>
      <div class="converter">
        <div class="row" style="gap:12px;margin-bottom:12px">
          <input id="convertFrom" type="number" placeholder="–°—É–º–º–∞" style="flex:1" />
          <select id="fromCurrency" style="width:100px">
            <option value="KGS">KGS</option>
            <option value="USD">USD</option>
            <option value="EUR">EUR</option>
            <option value="RUB">RUB</option>
            <option value="CNY">CNY</option>
          </select>
          <span style="font-size:20px">‚Üí</span>
          <select id="toCurrency" style="width:100px">
            <option value="USD">USD</option>
            <option value="EUR">EUR</option>
            <option value="RUB">RUB</option>
            <option value="KGS">KGS</option>
            <option value="CNY">CNY</option>
          </select>
        </div>
        <button id="convertBtn" style="width:100%" data-key="rates.convertBtn">–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
        <div id="convertResult" style="text-align:center;margin-top:12px;font-size:18px;font-weight:700;color:var(--primary)"></div>
      </div>
    </section>
  </div>

  <dialog id="newCardModal">
    <form method="dialog" class="card">
      <h3 data-key="card.add">–ù–æ–≤–∞—è –∫–∞—Ä—Ç–∞</h3>
      <input id="ncName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" required data-key="card.name" />
      <select id="ncCategory">
        <option value="e-wallet" data-key="category.e-wallet">—ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–µ –∫–æ—à–µ–ª—å–∫–∏</option>
        <option value="bonus" data-key="category.bonus">–±–æ–Ω—É—Å–Ω—ã–µ –∫–∞—Ä—Ç—ã</option>
        <option value="other" data-key="category.other">–¥—Ä—É–≥–æ–µ</option>
      </select>
            <div>
              <label data-key="card.qr">QR –∫–æ–¥ –∏–ª–∏ —à—Ç—Ä–∏—Ö-–∫–æ–¥:</label>
              <input type="file" id="ncCodeFile" accept="image/*" />
              <button type="button" id="ncScanBtn" data-key="card.scanner">üì∑ –°–∫–∞–Ω–µ—Ä</button>
              <input id="ncData" placeholder="–ò–ª–∏ –≤–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤—Ä—É—á–Ω—É—é" data-key="card.manual" />
            </div>
      <div>
        <label data-key="card.background">–§–æ–Ω –∫–∞—Ä—Ç—ã:</label>
        <input type="file" id="ncBgFile" accept="image/*" />
      </div>
      <input id="ncBank" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–∞–Ω–∫–∞" data-key="card.bank" />
      <menu>
        <button value="cancel" data-key="card.cancel">–û—Ç–º–µ–Ω–∞</button>
        <button id="ncSave" value="default" data-key="card.save">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </menu>
    </form>
  </dialog>

  <dialog id="editCardModal">
    <form method="dialog" class="card">
      <h3 data-key="card.edit">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ä—Ç—É</h3>
      <input id="ecName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" data-key="card.name" />
      <select id="ecCategory">
        <option value="e-wallet" data-key="category.e-wallet">—ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–µ –∫–æ—à–µ–ª—å–∫–∏</option>
        <option value="bonus" data-key="category.bonus">–±–æ–Ω—É—Å–Ω—ã–µ –∫–∞—Ä—Ç—ã</option>
        <option value="other" data-key="category.other">–¥—Ä—É–≥–æ–µ</option>
      </select>
      <input id="ecCardNumber" placeholder="–ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã" data-key="card.number" />
      <input id="ecExpiry" placeholder="–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è (–ú–ú/–ì–ì)" data-key="card.expiry" />
            <div>
              <label data-key="card.qr">QR –∫–æ–¥ –∏–ª–∏ —à—Ç—Ä–∏—Ö-–∫–æ–¥:</label>
              <input type="file" id="ecCodeFile" accept="image/*" />
              <button type="button" id="ecScanBtn" data-key="card.scanner">üì∑ –°–∫–∞–Ω–µ—Ä</button>
              <input id="ecData" placeholder="–ò–ª–∏ –≤–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤—Ä—É—á–Ω—É—é" data-key="card.manual" />
            </div>
      <div>
        <label data-key="card.background">–§–æ–Ω –∫–∞—Ä—Ç—ã:</label>
        <input type="file" id="ecBgFile" accept="image/*" />
      </div>
      <input id="ecBank" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–∞–Ω–∫–∞" data-key="card.bank" />
      <menu>
        <button value="cancel" data-key="card.cancel">–û—Ç–º–µ–Ω–∞</button>
        <button id="ecDelete" type="button" style="background: #f44336; color: white;" data-key="card.deleteBtn">–£–¥–∞–ª–∏—Ç—å</button>
        <button id="ecSave" value="default" data-key="card.save">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </menu>
    </form>
  </dialog>

  <dialog id="profileModal">
    <form method="dialog" class="card">
      <h3 data-key="profile.title">–ü—Ä–æ—Ñ–∏–ª—å</h3>
      <input id="profileLogin" placeholder="–õ–æ–≥–∏–Ω" readonly data-key="profile.login" />
      <input id="profilePassword" placeholder="–ü–∞—Ä–æ–ª—å" readonly data-key="profile.password" />
      <input id="profileName" placeholder="–ò–º—è" data-key="profile.name" />
      <input id="profileSurname" placeholder="–§–∞–º–∏–ª–∏—è" data-key="profile.surname" />
      <input id="profileAge" type="number" placeholder="–í–æ–∑—Ä–∞—Å—Ç" min="1" max="120" data-key="profile.age" />
      <div style="margin: 16px 0; padding: 12px; background: #f5f5f5; border-radius: 8px;">
        <h4 style="margin: 0 0 8px 0; font-size: 14px;" data-key="profile.backup">–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ</h4>
        <button id="exportData" style="background: #4caf50; color: white; padding: 6px 12px; border: none; border-radius: 4px; margin-right: 8px; font-size: 12px;" data-key="profile.export">üì• –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</button>
        <button id="importData" style="background: #2196f3; color: white; padding: 6px 12px; border: none; border-radius: 4px; font-size: 12px;" data-key="profile.import">üì§ –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</button>
        <input type="file" id="importFile" accept=".json" style="display: none;" />
      </div>
      <menu>
        <button value="cancel" data-key="card.cancel">–û—Ç–º–µ–Ω–∞</button>
        <button id="profileSave" value="default" data-key="card.save">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </menu>
    </form>
  </dialog>

  <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js"></script>
  <script src="app.js"></script>
</body>
</html>
